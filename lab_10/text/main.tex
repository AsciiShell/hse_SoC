%!TEX TS-program = xelatex

% Шаблон документа LaTeX создан в 2018 году
% Алексеем Подчезерцевым
% В качестве исходных использованы шаблоны
% 	Данилом Фёдоровых (danil@fedorovykh.ru) 
%		https://www.writelatex.com/coursera/latex/5.2.2
%	LaTeX-шаблон для русской кандидатской диссертации и её автореферата.
%		https://github.com/AndreyAkinshin/Russian-Phd-LaTeX-Dissertation-Template

\documentclass[a4paper,14pt]{article}

\input{data/preambular.tex}
\begin{document} % конец преамбулы, начало документа
	\input{data/title.tex}
	\tableofcontents
	\pagebreak
	\section{Задание}
	
	\begin{enumerate}
		\item Реализуйте однотактный и многотактный модули в поведенческом стиле.
		
		\item Реализуйте данный модуль с параметром, равным значению 5, проанализируйте его	характеристики и убедитесь, что они не изменились по сравнению с предыдущими	реализациями. Убедитесь в работоспособности получившихся реализаций, выполните имплементацию и сравните их	характеристики с характеристиками исходной реализации.
	
		\item Выполните имплементацию модуля со значением параметра n = 5, проанализируйте его	характеристики и убедитесь, что они не изменились. Убедитесь в работоспособности получившихся реализаций, выполните имплементацию и сравните их
		характеристики с характеристиками исходной реализации.
		 
	\end{enumerate}
	
	\section{Дополнительные задания}
	
	\subsection{Задание 1}
	
	Реализуйте однотактный и многотактный модули в поведенческом стиле.
	
	На рис. \ref{fig:z103} представлен результат компиляции однотактного модуля в поведенческом стиле.
	 
	{\small \VerbatimInput{../03_syn_pow_5_single_cycle_always/pow_5_single_cycle_always.v}}
	
	\begin{figure}[H]
		\centering
		\includegraphics[width=0.8\linewidth]{images/z1_03}
		\caption{Результат компиляции однотактного модуля}
		\label{fig:z103}
	\end{figure}
			
	На рис. \ref{fig:z106} представлен результат компиляции однотактного модуля в поведенческом стиле.
	
	{\small \VerbatimInput{../06_syn_pow_5_multi_cycle_always/pow_5_multi_cycle_always.v}}
	
	\begin{figure}[H]
		\centering
		\includegraphics[width=0.8\linewidth]{images/z1_06}
		\caption{Результат компиляции многотактного модуля}
		\label{fig:z106}
	\end{figure}
		
	
	\subsection{Задание 2}
	
	Реализуйте данный модуль с параметром, равным значению 5, проанализируйте его характеристики и убедитесь, что они не изменились по сравнению с предыдущими	реализациями. Убедитесь в работоспособности получившихся реализаций, выполните имплементацию и сравните их характеристики с характеристиками исходной реализации.
	
	Сравнительная характеристика представлена на рис.~\ref{fig:z24}, \ref{fig:z25} и \ref{fig:z210}.
	
	\begin{figure}[H]
		\centering
		\includegraphics[width=0.8\linewidth]{images/z2_4}
		\caption{Результат компиляции с параметром равным 4}
		\label{fig:z24}
	\end{figure}
	
	\begin{figure}[H]
		\centering
		\includegraphics[width=0.8\linewidth]{images/z2_5}
		\caption{Результат компиляции с параметром равным 5}
		\label{fig:z25}
	\end{figure}
	
	\begin{figure}[H]
		\centering
		\includegraphics[width=0.8\linewidth]{images/z2_10}
		\caption{Результат компиляции с параметром равным 10}
		\label{fig:z210}
	\end{figure}
	
	
	\subsection{Задание 3}
	
	Выполните имплементацию модуля со значением параметра n = 5, проанализируйте его характеристики и убедитесь, что они не изменились. Убедитесь в работоспособности получившихся реализаций, выполните имплементацию и сравните их	характеристики с характеристиками исходной реализации.
	
	Сравнительная характеристика представлена на рис.~\ref{fig:z34}, \ref{fig:z35} и \ref{fig:z310}.
	
	\begin{figure}[H]
		\centering
		\includegraphics[width=0.8\linewidth]{images/z3_4}
		\caption{Результат компиляции с параметром равным 4}
		\label{fig:z34}
	\end{figure}

	\begin{figure}[H]
		\centering
		\includegraphics[width=0.8\linewidth]{images/z3_5}
		\caption{Результат компиляции с параметром равным 5}
		\label{fig:z35}
	\end{figure}

	\begin{figure}[H]
		\centering
		\includegraphics[width=0.8\linewidth]{images/z3_10}
		\caption{Результат компиляции с параметром равным 10}
		\label{fig:z310}
	\end{figure}
	

	\section{Задания для самостоятельной работы}
	
	Создать алгоритм вычисления квадратного корня.
	
	Исходный код генератора кода:
	{\small \VerbatimInput{../generator.py}}
	
	Исходный код проекта:
	{\small \VerbatimInput{../z1_0_single_cycle_struct/pow_5_single_cycle_struct.v}}
	
	На рис.~\ref{fig:dop_wave} представлены результаты тестирования.
	На рис.~\ref{fig:dop_report} представлены результаты компиляции.
	RTL представление доступно на рис.~\ref{fig:dop_rtl}.
	Максимальная рабочая частота 266.24 MHz.
	
	\begin{figure}[H]
		\centering
		\includegraphics[width=0.8\linewidth]{images/dop_wave}
		\caption{Тестирование схемы}
		\label{fig:dop_wave}
	\end{figure}

	\begin{figure}[H]
		\centering
		\includegraphics[width=0.8\linewidth]{images/dop_report}
		\caption{Результат компиляции}
		\label{fig:dop_report}
	\end{figure}
	
	\begin{figure}[H]
		\centering
		\includegraphics[width=\linewidth]{images/dop_rtl}
		\caption{RTL представление}
		\label{fig:dop_rtl}
	\end{figure}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
	\section{Контрольные вопросы}
	
	Подчезерцев Алексей:
	
	\begin{enumerate}
		\item 9. В каких случаях введение сигнала enable в конвейерную схему может отрицательно сказаться на энергопотреблении? 
		
		Динамическое энергопотребление линейно зависит от интенсивности переключения транзисторов.
		Транзисторы переключаются при изменении значения входных сигналов, и эти
		изменения распространяются по схеме даже тогда, когда вычисление само по себе не
		требуется. Поэтому при увеличении тактовой частоты динамическая составляющая
		энергопотребления также увеличивается. Сигнал enable позволяет добавить данные высокопроизводительные блоки в схему.
	
		\item 2. В чем разница между внутренней и внешней фрагментацией в конвейерных схемах?
		Каким образом эти типы фрагментации влияют на эффективность конвейерной	схемы?
		
		Неравенство задержек на стадиях конвейера называется \textbf{внутренней фрагментацией}.
		
		В том случае, если определенный вычислительный ресурс какой-либо стадии не востребован для
		обработки какого-либо типа запросов, поступление такого запроса приведет к простаиванию вычислительного
		ресурса и снижению потенциальной эффективности конвейера. Это простаивание
		называется \textbf{внешней фрагментацией}.
		
		\item 10. Разработчик аппаратного блока получил критическую задержку в 20 нс на одной из стадий конвейера (на каждой стадии запрос обрабатывается один такт). После некоторых размышлений он сделал эту стадию многотактной, что снизило критическую задержку в конвейере до 10 нс. 20 \% запросов на этой стадии стали занимать по четыре такта, а 80 \% запросов занимают один такт. На сколько	изменилась максимальная тактовая частота конвейера и его средняя пропускная способность?
		
		Была частота 50МГц, стала 100МГц.
		
		Средняя пропускная способность $BW_{mean} =  \dfrac{1}{(0.2 * 4 + 0.8 * 1) * 10ns} = 62.5MHz$

	\end{enumerate}
	
	Солодянкин Андрей:

	\begin{enumerate}
		\item 4. При каких свойствах вычислительной нагрузки и стратегии оптимизации применение	конвейерной реализации является предпочтительным по сравнению с многотактной и наоборот?
		
		Сравнение реализаций по аппаратным затратам
		\begin{itemize}
			\item Лучше конвейерная реализация: максимальная частота, интервал инициации (такт), МОп/С, задержка (нс);
			
			\item Лучше многотактовая реализация: Аппаратные ресурсы, энергопотребление;
			
			\item Одинаково: Задержка(такт).
		\end{itemize}
		
		\item 7. Алгоритм состоит из восьми одинаковых последовательно зависимых операций.	Кроме того, результат третьей операции используется в первой операции у следующего запроса. Какова будет структура конвейера, оптимизированного по пропускной способности?
		
		Объединяем каждые 3 операции в один такт, таким образом, После окончания первого такта уже появятся данные для начала работы следующей операции. Внешняя фрагментация минимальна.
	
		\item 5. Необходимо спроектировать аппаратный блок. Существует возможность выбрать один из двух алгоритмов. Первый из них состоит из трех последовательно зависимых операций со следующими задержками: Ll = 20 нс, L2 = 15 нс, LЗ = 15 нс. Второй	алгоритм состоит из двух последовательно зависимых операций со следующими задержками: Ll = 25 нс, L2 = 15 нс. Задержка на буферизацию близка к нулю (ею	можно пренебречь). 
		
		Какой именно из двух алгоритмов и какую именно реализацию (комбинационную или конвейерную) следует выбрать для аппаратного блока? 		
		Какую стратегию оптимизации (по пропускной способности или по задержке) следует выбрать? 		
		Какие характеристики (пропускная способность и задержка) будут у этих блоков?
		
		Для первой реализации подходит конвейерная реализация, с частотой 50МГц, пропускная способность будет также 50 МГц, оптимизация по пропускной способности.
		
		Для второй реализации подходит комбинационная реализация, частота будет 25 МГц, пропускная способность будет также 25 МГц, оптимизация по задержке.
		
		
		
	\end{enumerate}
	
	\section{Выводы по работе}
	
	В ходе работы получен опыт проектирования схем в программе Quartus с помощью языка Verilog.
	Полученное устройство было протестировано с помощью бенчтестов в программе Quartus Simulation Waveform editor.
	В процессе работы были смоделированы устройства для конвейерной обработки данных и изучены различные способы моделирования.
	В процессе был получен опыт работы с платой DE10-Lite, на которой проверялась работоспособность полученного устройства.
	
	\newpage 
	\renewcommand{\refname}{{\normalsize Список использованных источников}} 
	\centering 
	\begin{thebibliography}{9} 
		\addcontentsline{toc}{section}{\refname} 
		\bibitem{Verilog} Thomas D., Moorby P. The Verilog Hardware Description Language. – Springer Science \& Business Media, 2008.
		\bibitem{citekey} Khor W. Y. et al. Evaluation of FPGA Based QSPI Flash Access Using Partial Reconfiguration //2019 7th International Conference on Smart Computing \& Communications (ICSCC). – IEEE, 2019. – С. 1-5
	\end{thebibliography}
	
\end{document} % конец документа
