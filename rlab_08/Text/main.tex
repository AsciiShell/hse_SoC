%!TEX TS-program = xelatex

% Шаблон документа LaTeX создан в 2018 году
% Алексеем Подчезерцевым
% В качестве исходных использованы шаблоны
% 	Данилом Фёдоровых (danil@fedorovykh.ru) 
%		https://www.writelatex.com/coursera/latex/5.2.2
%	LaTeX-шаблон для русской кандидатской диссертации и её автореферата.
%		https://github.com/AndreyAkinshin/Russian-Phd-LaTeX-Dissertation-Template

\documentclass[a4paper,14pt]{article}

\input{data/preambular.tex}
\begin{document} % конец преамбулы, начало документа
\input{data/title.tex}
\tableofcontents
\pagebreak

\section{Задание}

Разработать секундомер. 
С момента прошивки платы секундомер должен отсчитывать секунды миганием светодиода.
Ha семисегментном индикаторе отображается количество пройденных секунд в 16-тиричной системе счисления и в 10-й. 
При достижении количества секунд заданного пользователем (в памяти) при программировании платы, отсчет должен начаться в обратную сторону в два раза быстрее. 
Создать проект и реализовать заданное устройство.

\section{Выполнение работы}

Создадим проект, в качестве device выберем 10M50DAF484C7G семейства MAX 10.

Создадим схему проекта (рис.~\ref{fig:schema}).
Сигнал с генератора подается на делитель частоты (рис.~\ref{fig:schema_div}), шаг деления подается с обратной связи схемы. После делителя сигнал подается на счётчик, результат которого подается на шину res и выход $resout$.
После результат сравнивается с 0 или записанным числом секунд и в случае успеха подает сигнал на T-триггер, который управляет частотой понижения, направлением подсчёта и сравниваемой величиной.
Текущее состояние счётчика выводится с помощью блоков преобразования на семисегментные индикаторы (схема на рис.~\ref{fig:schema_div}) в шестнадцатеричном формате, а также проходит через делитель на 10 для преобразование в десятичный формат и аналогичным образом выводится на индикаторы.

\begin{figure}[H]
	\centering
	\includegraphics[width=\linewidth]{image/schema}
	\caption{Схема проекта}
	\label{fig:schema}
\end{figure}

\begin{figure}[H]
	\centering
	\includegraphics[width=\linewidth]{image/schema_div}
	\caption{Схема делителя}
	\label{fig:schema_div}
\end{figure}

\begin{figure}[H]
	\centering
	\includegraphics[width=\linewidth]{image/schema_segment}
	\caption{Схема семисегментного индикатора}
	\label{fig:schema_segment}
\end{figure}

Выполним компиляцию проекта.
В отчете компиляции (рис.~\ref{fig:report}) видно потребление логических и других элементов данным проектом.

\begin{figure}[H]
	\centering
	\includegraphics[width=0.6\linewidth]{image/report}
	\caption{Результат компиляции}
	\label{fig:report}
\end{figure}

Выполним тестирование схемы с помощью waveform (рис.~\ref{fig:wave}).
На выходе $resout$ отображается количество секунд.
Как можно заметить, после достижения заданного значения счётчик работает в обратном направлении с удвоенной скоростью.
На выходах $dec_1$, $dec_2$, $hex_1$ и $hex_2$ выводятся сигналы для семисегментных индикаторов.
Как можно заметить, сигналы старших разрядов изменяются раз в 10 или 16 изменений результата.

\begin{figure}[H]
	\centering
	\includegraphics[width=\linewidth]{image/wave}
	\caption{Тестирование схемы}
	\label{fig:wave}
\end{figure}

Построим RTL представление проекта (рис.~\ref{fig:rtl}).

\begin{figure}[H]
	\centering
	\includegraphics[width=\linewidth]{image/rtl}
	\caption{RTL представление проекта}
	\label{fig:rtl}
\end{figure}

Построим TMV представление проекта (рис.~\ref{fig:tmv_1}) и подробно рассмотрим логическую часть (рис.~\ref{fig:tmv_2}).

\begin{figure}[H]
	\centering
	\includegraphics[width=\linewidth]{image/tmv_1}
	\caption{TMV представление изделия}
	\label{fig:tmv_1}
\end{figure}

\begin{figure}[H]
	\centering
	\includegraphics[width=\linewidth]{image/tmv_2}
	\caption{Детальное TMV представление логики}
	\label{fig:tmv_2}
\end{figure}

Далее перейдем в chip planner и рассмотрим подробно входы (рис.~\ref{fig:chip}) одного из элемента делителя.

\begin{figure}[H]
	\centering
	\includegraphics[width=0.5\linewidth]{image/chip}
	\caption{Размещение на чипе}
	\label{fig:chip}
\end{figure}

На рис.~\ref{fig:pins} представлено расположение пинов на плате.

\begin{figure}[H]
	\centering
	\includegraphics[width=0.8\linewidth]{image/pins}
	\caption{Назначение пинов}
	\label{fig:pins}
\end{figure}

Создадим новую ревизию проекта, настроим ее на оптимизацию энергопотребления (рис.~\ref{fig:settings}).
Выполним повторную сборку проекта, посмотрим на различия ревизий (рис.~\ref{fig:diff}).

\begin{figure}[H]
	\centering
	\includegraphics[width=0.8\linewidth]{image/settings}
	\caption{Настройка новой ревизии}
	\label{fig:settings}
\end{figure}

\begin{figure}[H]
	\centering
	\includegraphics[width=0.8\linewidth]{image/diff}
	\caption{Сравнение ревизий}
	\label{fig:diff}
\end{figure}

\subsection{Демонстрация работы}

Для тестирования проекта была изменены параметры частоты делителя до $10^8$ и $5 * 10^7$ для прямого и обратного пересчёта соответственно.
Было произведено тестирование на плате (рис.~\ref{fig:demo}).

\begin{figure}[H]
	\centering
	\includegraphics[width=0.8\linewidth]{image/demo}
	\caption{Демонстрация работы}
	\label{fig:demo}
\end{figure}

\section{Выводы по работе}

В ходе работы был получен блок секундомера с прямым и обратным пересчётом с возможностью вывода прошедших секунд.
Устройство были протестированы с помощью Quartus waveform, что подтвердило правильность работоспособности устройства.
Так же было выполнено построение RTL и TMV диаграмм для устройства, построены зависимости в chip planer, настроены пины.

\newpage 
\renewcommand{\refname}{{\normalsize Список использованных источников}} 
\centering 
\begin{thebibliography}{9} 
	\addcontentsline{toc}{section}{\refname} 
	\bibitem{Verilog} Thomas D., Moorby P. The Verilog Hardware Description Language. – Springer Science \& Business Media, 2008.
	\bibitem{Quartus} Антонов А., Филиппов А., Золотухо Р. Средства системной отладки САПР Quartus II //Компоненты и технологии. – 2008. – №. 89.
\end{thebibliography}

\end{document} % конец документа